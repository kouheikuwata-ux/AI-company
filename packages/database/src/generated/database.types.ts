// Placeholder file - will be regenerated by Supabase CLI
// Run: pnpm db:generate

export type Json =
  | string
  | number
  | boolean
  | null
  | { [key: string]: Json | undefined }
  | Json[]

export interface Database {
  public: {
    Tables: {
      tenants: {
        Row: {
          id: string
          name: string
          slug: string
          settings: Json
          created_at: string
          updated_at: string
        }
        Insert: {
          id?: string
          name: string
          slug: string
          settings?: Json
          created_at?: string
          updated_at?: string
        }
        Update: {
          id?: string
          name?: string
          slug?: string
          settings?: Json
          created_at?: string
          updated_at?: string
        }
      }
      users: {
        Row: {
          id: string
          email: string
          tenant_id: string
          role: 'owner' | 'admin' | 'member'
          display_name: string | null
          avatar_url: string | null
          created_at: string
          updated_at: string
        }
        Insert: {
          id: string
          email: string
          tenant_id: string
          role?: 'owner' | 'admin' | 'member'
          display_name?: string | null
          avatar_url?: string | null
          created_at?: string
          updated_at?: string
        }
        Update: {
          id?: string
          email?: string
          tenant_id?: string
          role?: 'owner' | 'admin' | 'member'
          display_name?: string | null
          avatar_url?: string | null
          created_at?: string
          updated_at?: string
        }
      }
      skills: {
        Row: {
          id: string
          tenant_id: string
          key: string
          name: string
          description: string
          category: string
          is_active: boolean
          active_version_id: string | null
          fallback_version_id: string | null
          created_at: string
          updated_at: string
        }
        Insert: {
          id?: string
          tenant_id: string
          key: string
          name: string
          description: string
          category: string
          is_active?: boolean
          active_version_id?: string | null
          fallback_version_id?: string | null
          created_at?: string
          updated_at?: string
        }
        Update: {
          id?: string
          tenant_id?: string
          key?: string
          name?: string
          description?: string
          category?: string
          is_active?: boolean
          active_version_id?: string | null
          fallback_version_id?: string | null
          created_at?: string
          updated_at?: string
        }
      }
      skill_versions: {
        Row: {
          id: string
          skill_id: string
          version: string
          spec: Json
          handler_code: string | null
          is_published: boolean
          pii_policy: Json
          llm_policy: Json
          has_external_effect: boolean
          required_responsibility_level: number
          created_at: string
          published_at: string | null
        }
        Insert: {
          id?: string
          skill_id: string
          version: string
          spec: Json
          handler_code?: string | null
          is_published?: boolean
          pii_policy?: Json
          llm_policy?: Json
          has_external_effect?: boolean
          required_responsibility_level?: number
          created_at?: string
          published_at?: string | null
        }
        Update: {
          id?: string
          skill_id?: string
          version?: string
          spec?: Json
          handler_code?: string | null
          is_published?: boolean
          pii_policy?: Json
          llm_policy?: Json
          has_external_effect?: boolean
          required_responsibility_level?: number
          created_at?: string
          published_at?: string | null
        }
      }
      skill_executions: {
        Row: {
          id: string
          idempotency_key: string
          tenant_id: string
          skill_id: string
          skill_version_id: string
          skill_key: string
          skill_version: string
          executor_type: 'user' | 'agent' | 'system'
          executor_id: string
          legal_responsible_user_id: string
          responsibility_level: number
          approval_chain: Json
          state: string
          previous_state: string | null
          state_changed_at: string
          state_changed_by: string | null
          created_at: string
          started_at: string | null
          completed_at: string | null
          budget_reserved_amount: number | null
          budget_consumed_amount: number | null
          budget_released: boolean
          result_status: 'success' | 'failure' | 'partial' | null
          result_summary: string | null
          error_code: string | null
          error_message: string | null
          trace_id: string
          parent_execution_id: string | null
        }
        Insert: {
          id?: string
          idempotency_key: string
          tenant_id: string
          skill_id: string
          skill_version_id: string
          skill_key: string
          skill_version: string
          executor_type: 'user' | 'agent' | 'system'
          executor_id: string
          legal_responsible_user_id: string
          responsibility_level: number
          approval_chain?: Json
          state?: string
          previous_state?: string | null
          state_changed_at?: string
          state_changed_by?: string | null
          created_at?: string
          started_at?: string | null
          completed_at?: string | null
          budget_reserved_amount?: number | null
          budget_consumed_amount?: number | null
          budget_released?: boolean
          result_status?: 'success' | 'failure' | 'partial' | null
          result_summary?: string | null
          error_code?: string | null
          error_message?: string | null
          trace_id: string
          parent_execution_id?: string | null
        }
        Update: {
          id?: string
          idempotency_key?: string
          tenant_id?: string
          skill_id?: string
          skill_version_id?: string
          skill_key?: string
          skill_version?: string
          executor_type?: 'user' | 'agent' | 'system'
          executor_id?: string
          legal_responsible_user_id?: string
          responsibility_level?: number
          approval_chain?: Json
          state?: string
          previous_state?: string | null
          state_changed_at?: string
          state_changed_by?: string | null
          created_at?: string
          started_at?: string | null
          completed_at?: string | null
          budget_reserved_amount?: number | null
          budget_consumed_amount?: number | null
          budget_released?: boolean
          result_status?: 'success' | 'failure' | 'partial' | null
          result_summary?: string | null
          error_code?: string | null
          error_message?: string | null
          trace_id?: string
          parent_execution_id?: string | null
        }
      }
      budgets: {
        Row: {
          id: string
          tenant_id: string
          scope_type: 'tenant' | 'skill' | 'user'
          scope_id: string | null
          period_start: string
          period_end: string
          limit_amount: number
          used_amount: number
          reserved_amount: number
          is_hard_limit: boolean
          is_active: boolean
          created_at: string
          updated_at: string
        }
        Insert: {
          id?: string
          tenant_id: string
          scope_type?: 'tenant' | 'skill' | 'user'
          scope_id?: string | null
          period_start: string
          period_end: string
          limit_amount: number
          used_amount?: number
          reserved_amount?: number
          is_hard_limit?: boolean
          is_active?: boolean
          created_at?: string
          updated_at?: string
        }
        Update: {
          id?: string
          tenant_id?: string
          scope_type?: 'tenant' | 'skill' | 'user'
          scope_id?: string | null
          period_start?: string
          period_end?: string
          limit_amount?: number
          used_amount?: number
          reserved_amount?: number
          is_hard_limit?: boolean
          is_active?: boolean
          created_at?: string
          updated_at?: string
        }
      }
      budget_reservations: {
        Row: {
          id: string
          budget_id: string
          execution_id: string | null
          amount: number
          actual_amount: number | null
          status: 'reserved' | 'consumed' | 'released'
          created_at: string
          consumed_at: string | null
          released_at: string | null
        }
        Insert: {
          id?: string
          budget_id: string
          execution_id?: string | null
          amount: number
          actual_amount?: number | null
          status?: 'reserved' | 'consumed' | 'released'
          created_at?: string
          consumed_at?: string | null
          released_at?: string | null
        }
        Update: {
          id?: string
          budget_id?: string
          execution_id?: string | null
          amount?: number
          actual_amount?: number | null
          status?: 'reserved' | 'consumed' | 'released'
          created_at?: string
          consumed_at?: string | null
          released_at?: string | null
        }
      }
      budget_transactions: {
        Row: {
          id: string
          budget_id: string
          reservation_id: string | null
          execution_id: string | null
          amount: number
          transaction_type: 'reserve' | 'consume' | 'release' | 'adjust'
          description: string | null
          created_at: string
        }
        Insert: {
          id?: string
          budget_id: string
          reservation_id?: string | null
          execution_id?: string | null
          amount: number
          transaction_type: 'reserve' | 'consume' | 'release' | 'adjust'
          description?: string | null
          created_at?: string
        }
        Update: {
          id?: string
          budget_id?: string
          reservation_id?: string | null
          execution_id?: string | null
          amount?: number
          transaction_type?: 'reserve' | 'consume' | 'release' | 'adjust'
          description?: string | null
          created_at?: string
        }
      }
      approval_requests: {
        Row: {
          id: string
          tenant_id: string
          execution_id: string
          requester_id: string
          approver_id: string | null
          status: 'pending' | 'approved' | 'rejected' | 'expired'
          scope: string
          expires_at: string
          approved_at: string | null
          rejected_at: string | null
          rejection_reason: string | null
          created_at: string
        }
        Insert: {
          id?: string
          tenant_id: string
          execution_id: string
          requester_id: string
          approver_id?: string | null
          status?: 'pending' | 'approved' | 'rejected' | 'expired'
          scope: string
          expires_at: string
          approved_at?: string | null
          rejected_at?: string | null
          rejection_reason?: string | null
          created_at?: string
        }
        Update: {
          id?: string
          tenant_id?: string
          execution_id?: string
          requester_id?: string
          approver_id?: string | null
          status?: 'pending' | 'approved' | 'rejected' | 'expired'
          scope?: string
          expires_at?: string
          approved_at?: string | null
          rejected_at?: string | null
          rejection_reason?: string | null
          created_at?: string
        }
      }
      audit_logs: {
        Row: {
          id: string
          tenant_id: string
          action: string
          actor_type: 'user' | 'agent' | 'system'
          actor_id: string
          resource_type: string
          resource_id: string
          metadata: Json
          ip_address: string | null
          user_agent: string | null
          created_at: string
        }
        Insert: {
          id?: string
          tenant_id: string
          action: string
          actor_type: 'user' | 'agent' | 'system'
          actor_id: string
          resource_type: string
          resource_id: string
          metadata?: Json
          ip_address?: string | null
          user_agent?: string | null
          created_at?: string
        }
        Update: {
          id?: string
          tenant_id?: string
          action?: string
          actor_type?: 'user' | 'agent' | 'system'
          actor_id?: string
          resource_type?: string
          resource_id?: string
          metadata?: Json
          ip_address?: string | null
          user_agent?: string | null
          created_at?: string
        }
      }
      execution_state_logs: {
        Row: {
          id: string
          execution_id: string
          from_state: string
          to_state: string
          actor_id: string | null
          metadata: Json | null
          created_at: string
        }
        Insert: {
          id?: string
          execution_id: string
          from_state: string
          to_state: string
          actor_id?: string | null
          metadata?: Json | null
          created_at?: string
        }
        Update: {
          id?: string
          execution_id?: string
          from_state?: string
          to_state?: string
          actor_id?: string | null
          metadata?: Json | null
          created_at?: string
        }
      }
      system_self_diagnosis_logs: {
        Row: {
          id: string
          created_at: string
          trigger_type: 'cron' | 'ci' | 'manual'
          system_version: string
          issues_total: number
          issues_auto_fixed: number
          issues_pending_approval: number
          summary: Json
          full_report: Json
        }
        Insert: {
          id?: string
          created_at?: string
          trigger_type: 'cron' | 'ci' | 'manual'
          system_version: string
          issues_total?: number
          issues_auto_fixed?: number
          issues_pending_approval?: number
          summary?: Json
          full_report?: Json
        }
        Update: {
          id?: string
          created_at?: string
          trigger_type?: 'cron' | 'ci' | 'manual'
          system_version?: string
          issues_total?: number
          issues_auto_fixed?: number
          issues_pending_approval?: number
          summary?: Json
          full_report?: Json
        }
      }
    }
    Functions: {
      get_current_tenant_id: {
        Args: Record<PropertyKey, never>
        Returns: string
      }
      set_tenant_context: {
        Args: { p_tenant_id: string }
        Returns: void
      }
    }
    Enums: {
      execution_state: 'CREATED' | 'PENDING_APPROVAL' | 'APPROVED' | 'BUDGET_RESERVED' | 'RUNNING' | 'COMPLETED' | 'FAILED' | 'TIMEOUT' | 'CANCELLED' | 'ROLLED_BACK'
      executor_type: 'user' | 'agent' | 'system'
      result_status: 'success' | 'failure' | 'partial'
      budget_scope_type: 'tenant' | 'skill' | 'user'
      approval_status: 'pending' | 'approved' | 'rejected' | 'expired'
      budget_transaction_type: 'reserve' | 'consume' | 'release' | 'adjust'
      user_role: 'owner' | 'admin' | 'member'
      diagnosis_trigger_type: 'cron' | 'ci' | 'manual'
    }
  }
}
